%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Copyright (c) 2013, ETH Zurich.
% All rights reserved.
%
% This file is distributed under the terms in the attached LICENSE file.
% If you do not find this file, copies can be found by writing to:
% ETH Zurich D-INFK, Universitaetstr. 6, CH-8092 Zurich. Attn: Systems Group.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass[a4paper,twoside]{report} % for a report (default)

\usepackage{bftn} % You need this
\usepackage{multirow}
\usepackage{listings}
\usepackage{color}

\title{Barrelfish on ARMv7}   % title of report
\author{Simon Gerber \and Stefan Kaestle \and Timothy Roscoe \and
  Pravin Shinde \and Gerd Zellweger}
\tnnumber{017}  % give the number of the tech report
\tnkey{ARMv7} % Short title, will appear in footer

% \date{Month Year} % Not needed - will be taken from version history

\newcommand{\todo}[1]{\note{\textbf{TODO:} #1}}

\begin{document}
\maketitle

%
% Include version history first
%
\begin{versionhistory}
\vhEntry{0.1}{05.12.2013}{SK}{Initial version}
\end{versionhistory}

% \intro{Abstract}		% Insert abstract here
% \intro{Acknowledgements}	% Uncomment (if needed) for acknowledgements
% \tableofcontents		% Uncomment (if needed) for final draft
% \listoffigures		% Uncomment (if needed) for final draft
% \listoftables			% Uncomment (if needed) for final draft

\lstset{
  language=C,
  basicstyle=\ttfamily \small,
  flexiblecolumns=false,
  basewidth={0.5em,0.45em},
  boxpos=t,
}

\newcommand{\eclipse}{ECL\textsuperscript{i}PS\textsuperscript{e}\xspace}
\newcommand{\codesize}{\scriptsize}
\newcommand{\note}[1]{[\textcolor{red}{\emph{#1}}]}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Introduction}

This document describes the state of the ARM port of
Barrelfish~\cite{barrelfish:sosp09}.

\todo{Explain architectures and platforms}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Barrelfish implementation on ARM}\label{chap:impl}

\todo{Explain that we have several: ARMv5, OMAP4460 A9, OMAP4460 M3
  and the VExpress\_EMM emulated by gem5}

\section{ARM specifics}

%--------------------------------------------------
\section{OMAP4460 specifics}

Dual core A9 with two M3 accelerators.

\subsection{Compilation}

\todo{Get from public Barrelfish wiki}

\section{Boot process: first (bootstrap) core}

\todo{From AOS writeup?}

\section{Boot process: subsequent cores}

\todo{From AOS writeup?} 

\todo{Kornilios did a clean implementation, he should know}

\section{Physical address space}

Partitioned in half. Independent mem-server on every core, which work
independently.

\section{Interconnect driver}\label{sec:interconnect}

Mention that there is a mailbox. I don't think we have a driver for it
in the tree, but Claudio might have one.

\section{M3 cores}

Get from Claudio's thesis.

%--------------------------------------------------
\section{gem5 specifics}

\section{Compilation}

\todo{Get from Samuel's README file}

\section{Boot process: first (bootstrap) core}

\todo{Get from Samuel's thesis, 4.1.1}

\section{Boot process: subsequent cores}

Write start address of second core in SYSFLAGS register and raise
SWI.

\todo{Samuel, 4.2.2}

\section{Memory}

\todo{From Samuel's thesis, 4.1.2}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Reflections on ARM as a platform}\label{chap:refl}

\section{Debugging}~\label{debugging}

Experience with JTAG?

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\bibliographystyle{abbrv} 
\bibliography{defs,barrelfish}

\end{document}

\end{document}
